{% extends 'base.html' %}
{% block title %}Create Professor{% endblock %}

{% block content %}
<section class="flex flex-col gap-6 shadow-2xl p-8 md:p-10 rounded-2xl bg-white max-w-3xl mx-auto mt-10">
    <div class="flex justify-center">
        <img id="imgPreview" src="#" alt="No image selected" 
             class="w-48 h-48 rounded-full object-cover border border-gray-300 shadow-md hidden">
    </div>

    <form action="" method="post" enctype="multipart/form-data" class="flex flex-col gap-4">
        {% csrf_token %}
        {{ userform.as_div }}
        {{ professorform.as_div }}
        <button type="submit" 
                class="bg-orange-400 hover:bg-orange-500 transition-colors text-white py-2 px-6 rounded-2xl shadow mt-2">
            Create
        </button>
    </form>
</section>
{% endblock %}

{% block script %}
<script>
    const fileInput = document.querySelector('input[type="file"][name="img"]');
    const preview = document.getElementById('imgPreview');

    fileInput.addEventListener('change', function(event) {
        const file = event.target.files[0];
        if(file){
            const reader = new FileReader();
            reader.onload = function(e){
                preview.src = e.target.result;
                preview.style.display = 'block';
            }
            reader.readAsDataURL(file);
        } else {
            preview.src = '#';
            preview.style.display = 'none';
        }
    });
</script>
{% endblock %}
